<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelTools | All-in-One Image & PDF Suite</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary: #e53e3e; /* Professional Red like iLovePDF */
            --dark: #33333b;
            --light-bg: #f8f9fa;
        }

        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background: var(--light-bg); color: var(--dark); }

        /* Navigation */
        nav { background: white; padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .logo { font-weight: 800; font-size: 1.5rem; color: var(--primary); text-decoration: none; }

        /* Hero Section */
        .hero { text-align: center; padding: 60px 20px; background: white; }
        .hero h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .hero p { color: #666; font-size: 1.1rem; }

        /* Tools Grid (Matches Image 1) */
        .tools-container { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; padding: 40px 20px; }
        .tool-card { background: white; padding: 30px; border-radius: 12px; text-align: center; transition: 0.3s; cursor: pointer; border: 1px solid #eee; text-decoration: none; color: inherit; }
        .tool-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); border-color: var(--primary); }
        .tool-icon { font-size: 2.5rem; margin-bottom: 15px; display: block; }
        .tool-card h3 { margin: 10px 0; font-size: 1.1rem; }

        /* Workspace Section */
        #workspace { max-width: 800px; margin: 20px auto; background: white; padding: 40px; border-radius: 15px; display: none; text-align: center; }
        .upload-box { border: 2px dashed #ccc; padding: 40px; border-radius: 10px; cursor: pointer; background: #fffafb; }
        .upload-box:hover { border-color: var(--primary); }

        /* Result Table */
        .result-table { width: 100%; border-collapse: collapse; margin-top: 30px; }
        .result-table th { background: var(--primary); color: white; padding: 12px; }
        .result-table td { padding: 12px; border-bottom: 1px solid #eee; }
        
        .btn { background: var(--primary); color: white; border: none; padding: 12px 25px; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: 15px; }
        .btn-download { background: #28a745; text-decoration: none; padding: 5px 10px; font-size: 0.8rem; border-radius: 4px; color: white;}
    </style>
</head>
<body>

<nav>
    <a href="#" class="logo">PIXELTOOLS</a>
    <div class="nav-links">Compress | PDF | Convert</div>
</nav>

<div class="hero">
    <h1>Every tool you need to work with Images & PDFs</h1>
    <p>Free, fast, and entirely in your browser.</p>
</div>

<div class="tools-container" id="toolsGrid">
    <div class="tool-card" onclick="openTool('compress')">
        <span class="tool-icon">üóúÔ∏è</span>
        <h3>Compress IMAGE</h3>
        <p style="font-size: 0.8rem; color: #777;">Reduce file size while maintaining quality.</p>
    </div>
    <div class="tool-card" onclick="openTool('pdf')">
        <span class="tool-icon">üìÑ</span>
        <h3>Image to PDF</h3>
        <p style="font-size: 0.8rem; color: #777;">Convert images into a single PDF document.</p>
    </div>
    </div>

<div id="workspace">
    <h2 id="toolTitle">Tool Name</h2>
    <div class="upload-box" onclick="document.getElementById('fileInput').click()">
        <p>Click to Upload or Drag & Drop Files</p>
        <input type="file" id="fileInput" multiple hidden onchange="handleFiles(this.files)">
    </div>

    <div id="settings" style="margin-top:20px;">
        <label>Adjust Quality: <span id="qLabel">0.7</span></label><br>
        <input type="range" id="quality" min="0.1" max="1.0" step="0.1" value="0.7" oninput="document.getElementById('qLabel').innerText=this.value">
    </div>

    <button class="btn" id="actionBtn" onclick="process()">Run Tool üöÄ</button>

    <table class="result-table" id="resTable" style="display:none;">
        <thead>
            <tr>
                <th>Preview üëÄ</th>
                <th>File üìÑ</th>
                <th>Size ‚öñÔ∏è</th>
                <th>Action üì•</th>
            </tr>
        </thead>
        <tbody id="resBody"></tbody>
    </table>
    <button class="btn" id="pdfDownload" style="display:none; background:#007bff;" onclick="downloadFinalPDF()">Download PDF üìë</button>
</div>

<script>
    const { jsPDF } = window.jspdf;
    let activeTool = '';
    let fileQueue = [];
    let processedFiles = [];

    function openTool(tool) {
        activeTool = tool;
        document.getElementById('toolsGrid').style.display = 'none';
        document.getElementById('workspace').style.display = 'block';
        document.getElementById('toolTitle').innerText = tool === 'compress' ? 'Compress Images üóúÔ∏è' : 'Convert Image to PDF üìÑ';
    }

    function handleFiles(files) {
        fileQueue = Array.from(files);
        alert(fileQueue.length + " files selected!");
    }

    async function process() {
        const quality = parseFloat(document.getElementById('quality').value);
        const tbody = document.getElementById('resBody');
        tbody.innerHTML = "";
        processedFiles = [];

        for (let file of fileQueue) {
            const data = await processSingleFile(file, quality);
            processedFiles.push(data);
            
            const row = `<tr>
                <td><img src="${data.url}" width="50"></td>
                <td>${data.name}</td>
                <td>${data.size} KB</td>
                <td><a href="${data.url}" download="fixed_${data.name}" class="btn-download">Download</a></td>
            </tr>`;
            tbody.insertAdjacentHTML('beforeend', row);
        }
        
        document.getElementById('resTable').style.display = 'table';
        if(activeTool === 'pdf') document.getElementById('pdfDownload').style.display = 'inline-block';
    }

    function processSingleFile(file, q) {
        return new Promise(resolve => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = e => {
                const img = new Image();
                img.src = e.target.result;
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width; canvas.height = img.height;
                    canvas.getContext('2d').drawImage(img, 0, 0);
                    const url = canvas.toDataURL('image/jpeg', q);
                    resolve({ url, name: file.name, size: Math.round(url.length/1333) });
                }
            }
        });
    }

    function downloadFinalPDF() {
        const doc = new jsPDF();
        processedFiles.forEach((img, i) => {
            if (i > 0) doc.addPage();
            const width = doc.internal.pageSize.getWidth();
            doc.addImage(img.url, 'JPEG', 0, 0, width, 150);
        });
        doc.save("PixelTools_Export.pdf");
    }
</script>
</body>
</html>
